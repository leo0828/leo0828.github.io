import{u as B,_ as S}from"./lSC6lnSC.js";import{j as H,r as m,I as C,c as u,o as a,J as x,a as v,d as M,t as k,f as d,K as N,L as P,M as j,b as V}from"./BWIoRq-O.js";import{_ as $}from"./DlAUqK2U.js";const z={class:"tracking-wide"},A={key:0,class:"text-zinc-400 text-sm mb-6 flex items-center"},D={key:1,class:"text-2xl sm:text-3xl font-medium mb-9"},R=["innerHTML"],U={__name:"PostContent",props:{postBody:{type:String,default:""},postTitle:{type:String,default:""},postUpdated:{type:[String,Number],default:""}},setup(s){const g=s,{$marked:n}=H(),c=m(null),r=m("");let p=null;const o=async()=>(p||(p=N()),p),_=e=>{if(!e)return"javascript";const t=[...e].find(i=>i.startsWith("language-"));return t?t.replace("language-",""):"javascript"};return C(()=>g.postBody,async e=>{if(!e){r.value="";return}let t=n(e);const i=document.createElement("div");i.innerHTML=t;const f=i.querySelectorAll("pre");if(f.length>0){const b=await o();for(const h of f){const l=h.querySelector("code"),L=l?l.textContent.trim():"",T=_(l==null?void 0:l.classList),w=b.highlight(L,{lang:T}),y=document.createElement("div");y.innerHTML=w,h.replaceWith(y.firstChild)}}r.value=i.innerHTML},{immediate:!0}),(e,t)=>(a(),u("div",z,[s.postUpdated?(a(),u("div",A,[t[0]||(t[0]=v("span",{class:"h-4 w-0.5 rounded-full bg-zinc-200 mr-3"},null,-1)),M(" 更新于："+k(new Date(s.postUpdated).toLocaleString()),1)])):x("",!0),s.postTitle?(a(),u("h1",D,k(s.postTitle),1)):x("",!0),v("div",{ref_key:"contentRef",ref:c,class:"text-zinc-800 text-sm sm:text-base space-y-4 sm:space-y-6",innerHTML:d(r)},null,8,R)]))}},q=$(U,[["__scopeId","data-v-811842fe"]]),E={key:0,class:"flex justify-center pt-20"},K={__name:"[id]",setup(s){const g=P(),n=m({}),c=m(!1),r=B();return(async()=>{c.value=!0;try{const o=await r.get(`/articles/${g.params.id}`);n.value=o}catch(o){console.log(o)}finally{c.value=!1}})(),(o,_)=>{const e=S,t=q;return a(),u("section",null,[d(c)?(a(),u("div",E,[V(e)])):(a(),j(t,{key:1,"post-title":d(n).title,"post-body":d(n).body_markdown,"post-updated":d(n).edited_at},null,8,["post-title","post-body","post-updated"]))])}}};export{K as default};
