var Tt=Object.defineProperty;var Bt=Object.getPrototypeOf;var Vt=Reflect.get;var ze=e=>{throw TypeError(e)};var zt=(e,t,r)=>t in e?Tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var be=(e,t,r)=>zt(e,typeof t!="symbol"?t+"":t,r),xe=(e,t,r)=>t.has(e)||ze("Cannot "+r);var E=(e,t,r)=>(xe(e,t,"read from private field"),r?r.call(e):t.get(e)),z=(e,t,r)=>t.has(e)?ze("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),M=(e,t,r,n)=>(xe(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ke=(e,t,r)=>(xe(e,t,"access private method"),r);var He=(e,t,r)=>Vt(Bt(e),r,t);import{u as Ht,_ as Wt}from"./CWxdf1Jm.js";import{_ as ft,j as jt,r as he,I as Xt,c as re,o as j,J as Ee,a as Zt,d as Qt,t as We,K as qt,e as Jt,L as Kt,f as le,b as Yt}from"./GxWl8x7j.js";import{_ as er}from"./DlAUqK2U.js";const tr={name:"unwrap",root:e=>{const t=e.children[0],r=t.children[0];return{type:"root",children:[{...r,properties:{...t.properties,...r.properties}}]}}};function ne(e){if([...e].length!==1)throw new Error(`Expected "${e}" to be a single code point`);return e.codePointAt(0)}function rr(e,t,r){return e.has(t)||e.set(t,r),e.get(t)}const Ue=new Set(["alnum","alpha","ascii","blank","cntrl","digit","graph","lower","print","punct","space","upper","word","xdigit"]),x=String.raw;function se(e,t){if(e==null)throw new Error(t??"Value expected");return e}const dt=x`\[\^?`,gt=`c.? | C(?:-.?)?|${x`[pP]\{(?:\^?[-\x20_]*[A-Za-z][-\x20\w]*\})?`}|${x`x[89A-Fa-f]\p{AHex}(?:\\x[89A-Fa-f]\p{AHex})*`}|${x`u(?:\p{AHex}{4})? | x\{[^\}]*\}? | x\p{AHex}{0,2}`}|${x`o\{[^\}]*\}?`}|${x`\d{1,3}`}`,De=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,pe=new RegExp(x`
  \\ (?:
    ${gt}
    | [gk]<[^>]*>?
    | [gk]'[^']*'?
    | .
  )
  | \( (?:
    \? (?:
      [:=!>({]
      | <[=!]
      | <[^>]*>
      | '[^']*'
      | ~\|?
      | #(?:[^)\\]|\\.?)*
      | [^:)]*[:)]
    )?
    | \*[^\)]*\)?
  )?
  | (?:${De.source})+
  | ${dt}
  | .
`.replace(/\s+/g,""),"gsu"),$e=new RegExp(x`
  \\ (?:
    ${gt}
    | .
  )
  | \[:(?:\^?\p{Alpha}+|\^):\]
  | ${dt}
  | &&
  | .
`.replace(/\s+/g,""),"gsu");function nr(e,t={}){const r={flags:"",...t,rules:{captureGroup:!1,singleline:!1,...t.rules}};if(typeof e!="string")throw new Error("String expected as pattern");const n=kr(r.flags),s=[n.extended],o={captureGroup:r.rules.captureGroup,getCurrentModX(){return s.at(-1)},numOpenGroups:0,popModX(){s.pop()},pushModX(p){s.push(p)},replaceCurrentModX(p){s[s.length-1]=p},singleline:r.rules.singleline};let a=[],i;for(pe.lastIndex=0;i=pe.exec(e);){const p=sr(o,e,i[0],pe.lastIndex);p.tokens?a.push(...p.tokens):p.token&&a.push(p.token),p.lastIndex!==void 0&&(pe.lastIndex=p.lastIndex)}const u=[];let c=0;a.filter(p=>p.type==="GroupOpen").forEach(p=>{p.kind==="capturing"?p.number=++c:p.raw==="("&&u.push(p)}),c||u.forEach((p,f)=>{p.kind="capturing",p.number=f+1});const l=c||u.length;return{tokens:a.map(p=>p.type==="EscapedNumber"?$r(p,l):p).flat(),flags:n}}function sr(e,t,r,n){const[s,o]=r;if(r==="["||r==="[^"){const a=or(t,r,n);return{tokens:a.tokens,lastIndex:a.lastIndex}}if(s==="\\"){if("AbBGyYzZ".includes(o))return{token:je(r,r)};if(/^\\g[<']/.test(r)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(r))throw new Error(`Invalid group name "${r}"`);return{token:hr(r)}}if(/^\\k[<']/.test(r)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(r))throw new Error(`Invalid group name "${r}"`);return{token:mt(r)}}if(o==="K")return{token:wt("keep",r)};if(o==="N"||o==="R")return{token:X("newline",r,{negate:o==="N"})};if(o==="O")return{token:X("any",r)};if(o==="X")return{token:X("text_segment",r)};const a=ht(r,{inCharClass:!1});return Array.isArray(a)?{tokens:a}:{token:a}}if(s==="("){if(o==="*")return{token:Cr(r)};if(r==="(?{")throw new Error(`Unsupported callout "${r}"`);if(r.startsWith("(?#")){if(t[n]!==")")throw new Error('Unclosed comment group "(?#"');return{lastIndex:n+1}}if(/^\(\?[-imx]+[:)]$/.test(r))return{token:yr(r,e)};if(e.pushModX(e.getCurrentModX()),e.numOpenGroups++,r==="("&&!e.captureGroup||r==="(?:")return{token:ee("group",r)};if(r==="(?>")return{token:ee("atomic",r)};if(r==="(?="||r==="(?!"||r==="(?<="||r==="(?<!")return{token:ee(r[2]==="<"?"lookbehind":"lookahead",r,{negate:r.endsWith("!")})};if(r==="("&&e.captureGroup||r.startsWith("(?<")&&r.endsWith(">")||r.startsWith("(?'")&&r.endsWith("'"))return{token:ee("capturing",r,{...r!=="("&&{name:r.slice(3,-1)}})};if(r.startsWith("(?~")){if(r==="(?~|")throw new Error(`Unsupported absence function kind "${r}"`);return{token:ee("absence_repeater",r)}}throw r==="(?("?new Error(`Unsupported conditional "${r}"`):new Error(`Invalid or unsupported group option "${r}"`)}if(r===")"){if(e.popModX(),e.numOpenGroups--,e.numOpenGroups<0)throw new Error('Unmatched ")"');return{token:fr(r)}}if(e.getCurrentModX()){if(r==="#"){const a=t.indexOf(`
`,n);return{lastIndex:a===-1?t.length:a}}if(/^\s$/.test(r)){const a=/\s+/y;return a.lastIndex=n,{lastIndex:a.exec(t)?a.lastIndex:n}}}if(r===".")return{token:X("dot",r)};if(r==="^"||r==="$"){const a=e.singleline?{"^":x`\A`,$:x`\Z`}[r]:r;return{token:je(a,r)}}return r==="|"?{token:ir(r)}:De.test(r)?{tokens:_r(r)}:{token:G(ne(r),r)}}function or(e,t,r){const n=[Xe(t[1]==="^",t)];let s=1,o;for($e.lastIndex=r;o=$e.exec(e);){const a=o[0];if(a[0]==="["&&a[1]!==":")s++,n.push(Xe(a[1]==="^",a));else if(a==="]"){if(n.at(-1).type==="CharacterClassOpen")n.push(G(93,a));else if(s--,n.push(ur(a)),!s)break}else{const i=ar(a);Array.isArray(i)?n.push(...i):n.push(i)}}return{tokens:n,lastIndex:$e.lastIndex||e.length}}function ar(e){if(e[0]==="\\")return ht(e,{inCharClass:!0});if(e[0]==="["){const t=/\[:(?<negate>\^?)(?<name>[a-z]+):\]/.exec(e);if(!t||!Ue.has(t.groups.name))throw new Error(`Invalid POSIX class "${e}"`);return X("posix",e,{value:t.groups.name,negate:!!t.groups.negate})}return e==="-"?cr(e):e==="&&"?lr(e):G(ne(e),e)}function ht(e,{inCharClass:t}){const r=e[1];if(r==="c"||r==="C")return wr(e);if("dDhHsSwW".includes(r))return br(e);if(e.startsWith(x`\o{`))throw new Error(`Incomplete, invalid, or unsupported octal code point "${e}"`);if(/^\\[pP]\{/.test(e)){if(e.length===3)throw new Error(`Incomplete or invalid Unicode property "${e}"`);return xr(e)}if(new RegExp("^\\\\x[89A-Fa-f]\\p{AHex}","u").test(e))try{const n=e.split(/\\x/).slice(1).map(a=>parseInt(a,16)),s=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(n)),o=new TextEncoder;return[...s].map(a=>{const i=[...o.encode(a)].map(u=>`\\x${u.toString(16)}`).join("");return G(ne(a),i)})}catch{throw new Error(`Multibyte code "${e}" incomplete or invalid in Oniguruma`)}if(r==="u"||r==="x")return G(Er(e),e);if(Ze.has(r))return G(Ze.get(r),e);if(/\d/.test(r))return pr(t,e);if(e==="\\")throw new Error(x`Incomplete escape "\"`);if(r==="M")throw new Error(`Unsupported meta "${e}"`);if([...e].length===2)return G(e.codePointAt(1),e);throw new Error(`Unexpected escape "${e}"`)}function ir(e){return{type:"Alternator",raw:e}}function je(e,t){return{type:"Assertion",kind:e,raw:t}}function mt(e){return{type:"Backreference",raw:e}}function G(e,t){return{type:"Character",value:e,raw:t}}function ur(e){return{type:"CharacterClassClose",raw:e}}function cr(e){return{type:"CharacterClassHyphen",raw:e}}function lr(e){return{type:"CharacterClassIntersector",raw:e}}function Xe(e,t){return{type:"CharacterClassOpen",negate:e,raw:t}}function X(e,t,r={}){return{type:"CharacterSet",kind:e,...r,raw:t}}function wt(e,t,r={}){return e==="keep"?{type:"Directive",kind:e,raw:t}:{type:"Directive",kind:e,flags:se(r.flags),raw:t}}function pr(e,t){return{type:"EscapedNumber",inCharClass:e,raw:t}}function fr(e){return{type:"GroupClose",raw:e}}function ee(e,t,r={}){return{type:"GroupOpen",kind:e,...r,raw:t}}function dr(e,t,r,n){return{type:"NamedCallout",kind:e,tag:t,arguments:r,raw:n}}function gr(e,t,r,n){return{type:"Quantifier",kind:e,min:t,max:r,raw:n}}function hr(e){return{type:"Subroutine",raw:e}}const mr=new Set(["COUNT","CMP","ERROR","FAIL","MAX","MISMATCH","SKIP","TOTAL_COUNT"]),Ze=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]);function wr(e){const t=e[1]==="c"?e[2]:e[3];if(!t||!/[A-Za-z]/.test(t))throw new Error(`Unsupported control character "${e}"`);return G(ne(t.toUpperCase())-64,e)}function yr(e,t){let{on:r,off:n}=/^\(\?(?<on>[imx]*)(?:-(?<off>[-imx]*))?/.exec(e).groups;n??(n="");const s=(t.getCurrentModX()||r.includes("x"))&&!n.includes("x"),o=qe(r),a=qe(n),i={};if(o&&(i.enable=o),a&&(i.disable=a),e.endsWith(")"))return t.replaceCurrentModX(s),wt("flags",e,{flags:i});if(e.endsWith(":"))return t.pushModX(s),t.numOpenGroups++,ee("group",e,{...(o||a)&&{flags:i}});throw new Error(`Unexpected flag modifier "${e}"`)}function Cr(e){const t=/\(\*(?<name>[A-Za-z_]\w*)?(?:\[(?<tag>(?:[A-Za-z_]\w*)?)\])?(?:\{(?<args>[^}]*)\})?\)/.exec(e);if(!t)throw new Error(`Incomplete or invalid named callout "${e}"`);const{name:r,tag:n,args:s}=t.groups;if(!r)throw new Error(`Invalid named callout "${e}"`);if(n==="")throw new Error(`Named callout tag with empty value not allowed "${e}"`);const o=s?s.split(",").filter(l=>l!=="").map(l=>/^[+-]?\d+$/.test(l)?+l:l):[],[a,i,u]=o,c=mr.has(r)?r.toLowerCase():"custom";switch(c){case"fail":case"mismatch":case"skip":if(o.length>0)throw new Error(`Named callout arguments not allowed "${o}"`);break;case"error":if(o.length>1)throw new Error(`Named callout allows only one argument "${o}"`);if(typeof a=="string")throw new Error(`Named callout argument must be a number "${a}"`);break;case"max":if(!o.length||o.length>2)throw new Error(`Named callout must have one or two arguments "${o}"`);if(typeof a=="string"&&!/^[A-Za-z_]\w*$/.test(a))throw new Error(`Named callout argument one must be a tag or number "${a}"`);if(o.length===2&&(typeof i=="number"||!/^[<>X]$/.test(i)))throw new Error(`Named callout optional argument two must be '<', '>', or 'X' "${i}"`);break;case"count":case"total_count":if(o.length>1)throw new Error(`Named callout allows only one argument "${o}"`);if(o.length===1&&(typeof a=="number"||!/^[<>X]$/.test(a)))throw new Error(`Named callout optional argument must be '<', '>', or 'X' "${a}"`);break;case"cmp":if(o.length!==3)throw new Error(`Named callout must have three arguments "${o}"`);if(typeof a=="string"&&!/^[A-Za-z_]\w*$/.test(a))throw new Error(`Named callout argument one must be a tag or number "${a}"`);if(typeof i=="number"||!/^(?:[<>!=]=|[<>])$/.test(i))throw new Error(`Named callout argument two must be '==', '!=', '>', '<', '>=', or '<=' "${i}"`);if(typeof u=="string"&&!/^[A-Za-z_]\w*$/.test(u))throw new Error(`Named callout argument three must be a tag or number "${u}"`);break;case"custom":throw new Error(`Undefined callout name "${r}"`);default:throw new Error(`Unexpected named callout kind "${c}"`)}return dr(c,n??null,(s==null?void 0:s.split(","))??null,e)}function Qe(e){let t=null,r,n;if(e[0]==="{"){const{minStr:s,maxStr:o}=/^\{(?<minStr>\d*)(?:,(?<maxStr>\d*))?/.exec(e).groups,a=1e5;if(+s>a||o&&+o>a)throw new Error("Quantifier value unsupported in Oniguruma");if(r=+s,n=o===void 0?+s:o===""?1/0:+o,r>n&&(t="possessive",[r,n]=[n,r]),e.endsWith("?")){if(t==="possessive")throw new Error('Unsupported possessive interval quantifier chain with "?"');t="lazy"}else t||(t="greedy")}else r=e[0]==="+"?1:0,n=e[0]==="?"?1:1/0,t=e[1]==="+"?"possessive":e[1]==="?"?"lazy":"greedy";return gr(t,r,n,e)}function br(e){const t=e[1].toLowerCase();return X({d:"digit",h:"hex",s:"space",w:"word"}[t],e,{negate:e[1]!==t})}function xr(e){const{p:t,neg:r,value:n}=/^\\(?<p>[pP])\{(?<neg>\^?)(?<value>[^}]+)/.exec(e).groups;return X("property",e,{value:n,negate:t==="P"&&!r||t==="p"&&!!r})}function qe(e){const t={};return e.includes("i")&&(t.ignoreCase=!0),e.includes("m")&&(t.dotAll=!0),e.includes("x")&&(t.extended=!0),Object.keys(t).length?t:null}function kr(e){const t={ignoreCase:!1,dotAll:!1,extended:!1,digitIsAscii:!1,posixIsAscii:!1,spaceIsAscii:!1,wordIsAscii:!1,textSegmentMode:null};for(let r=0;r<e.length;r++){const n=e[r];if(!"imxDPSWy".includes(n))throw new Error(`Invalid flag "${n}"`);if(n==="y"){if(!/^y{[gw]}/.test(e.slice(r)))throw new Error('Invalid or unspecified flag "y" mode');t.textSegmentMode=e[r+2]==="g"?"grapheme":"word",r+=3;continue}t[{i:"ignoreCase",m:"dotAll",x:"extended",D:"digitIsAscii",P:"posixIsAscii",S:"spaceIsAscii",W:"wordIsAscii"}[n]]=!0}return t}function Er(e){if(new RegExp("^(?:\\\\u(?!\\p{AHex}{4})|\\\\x(?!\\p{AHex}{1,2}|\\{\\p{AHex}{1,8}\\}))","u").test(e))throw new Error(`Incomplete or invalid escape "${e}"`);const t=e[2]==="{"?new RegExp("^\\\\x\\{\\s*(?<hex>\\p{AHex}+)","u").exec(e).groups.hex:e.slice(2);return parseInt(t,16)}function $r(e,t){const{raw:r,inCharClass:n}=e,s=r.slice(1);if(!n&&(s!=="0"&&s.length===1||s[0]!=="0"&&+s<=t))return[mt(r)];const o=[],a=s.match(/^[0-7]+|\d/g);for(let i=0;i<a.length;i++){const u=a[i];let c;if(i===0&&u!=="8"&&u!=="9"){if(c=parseInt(u,8),c>127)throw new Error(x`Octal encoded byte above 177 unsupported "${r}"`)}else c=ne(u);o.push(G(c,(i===0?"\\":"")+u))}return o}function _r(e){const t=[],r=new RegExp(De,"gy");let n;for(;n=r.exec(e);){const s=n[0];if(s[0]==="{"){const o=/^\{(?<min>\d+),(?<max>\d+)\}\??$/.exec(s);if(o){const{min:a,max:i}=o.groups;if(+a>+i&&s.endsWith("?")){r.lastIndex--,t.push(Qe(s.slice(0,-1)));continue}}}t.push(Qe(s))}return t}function yt(e,t){if(!Array.isArray(e.body))throw new Error("Expected node with body array");if(e.body.length!==1)return!1;const r=e.body[0];return!t||Object.keys(t).every(n=>t[n]===r[n])}function Ar(e){return Ir.has(e.type)}const Ir=new Set(["AbsenceFunction","Backreference","CapturingGroup","Character","CharacterClass","CharacterSet","Group","Quantifier","Subroutine"]);function Ct(e,t={}){const r={flags:"",normalizeUnknownPropertyNames:!1,skipBackrefValidation:!1,skipLookbehindValidation:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...t,rules:{captureGroup:!1,singleline:!1,...t.rules}},n=nr(e,{flags:r.flags,rules:{captureGroup:r.rules.captureGroup,singleline:r.rules.singleline}}),s=(f,g)=>{const d=n.tokens[o.nextIndex];switch(o.parent=f,o.nextIndex++,d.type){case"Alternator":return q();case"Assertion":return vr(d);case"Backreference":return Sr(d,o);case"Character":return we(d.value,{useLastValid:!!g.isCheckingRangeEnd});case"CharacterClassHyphen":return Mr(d,o,g);case"CharacterClassOpen":return Nr(d,o,g);case"CharacterSet":return Lr(d,o);case"Directive":return Dr(d.kind,{flags:d.flags});case"GroupOpen":return Pr(d,o,g);case"NamedCallout":return Tr(d.kind,d.tag,d.arguments);case"Quantifier":return Fr(d,o);case"Subroutine":return Gr(d,o);default:throw new Error(`Unexpected token type "${d.type}"`)}},o={capturingGroups:[],hasNumberedRef:!1,namedGroupsByName:new Map,nextIndex:0,normalizeUnknownPropertyNames:r.normalizeUnknownPropertyNames,parent:null,skipBackrefValidation:r.skipBackrefValidation,skipLookbehindValidation:r.skipLookbehindValidation,skipPropertyNameValidation:r.skipPropertyNameValidation,subroutines:[],tokens:n.tokens,unicodePropertyMap:r.unicodePropertyMap,walk:s},a=Vr(Or(n.flags));let i=a.body[0];for(;o.nextIndex<n.tokens.length;){const f=s(i,{});f.type==="Alternative"?(a.body.push(f),i=f):i.body.push(f)}const{capturingGroups:u,hasNumberedRef:c,namedGroupsByName:l,subroutines:p}=o;if(c&&l.size&&!r.rules.captureGroup)throw new Error("Numbered backref/subroutine not allowed when using named capture");for(const{ref:f}of p)if(typeof f=="number"){if(f>u.length)throw new Error("Subroutine uses a group number that's not defined");f&&(u[f-1].isSubroutined=!0)}else if(l.has(f)){if(l.get(f).length>1)throw new Error(x`Subroutine uses a duplicate group name "\g<${f}>"`);l.get(f)[0].isSubroutined=!0}else throw new Error(x`Subroutine uses a group name that's not defined "\g<${f}>"`);return a}function vr({kind:e}){return Ne(se({"^":"line_start",$:"line_end","\\A":"string_start","\\b":"word_boundary","\\B":"word_boundary","\\G":"search_start","\\y":"text_segment_boundary","\\Y":"text_segment_boundary","\\z":"string_end","\\Z":"string_end_newline"}[e],`Unexpected assertion kind "${e}"`),{negate:e===x`\B`||e===x`\Y`})}function Sr({raw:e},t){const r=/^\\k[<']/.test(e),n=r?e.slice(3,-1):e.slice(1),s=(o,a=!1)=>{const i=t.capturingGroups.length;let u=!1;if(o>i)if(t.skipBackrefValidation)u=!0;else throw new Error(`Not enough capturing groups defined to the left "${e}"`);return t.hasNumberedRef=!0,Le(a?i+1-o:o,{orphan:u})};if(r){const o=/^(?<sign>-?)0*(?<num>[1-9]\d*)$/.exec(n);if(o)return s(+o.groups.num,!!o.groups.sign);if(/[-+]/.test(n))throw new Error(`Invalid backref name "${e}"`);if(!t.namedGroupsByName.has(n))throw new Error(`Group name not defined to the left "${e}"`);return Le(n)}return s(+n)}function Mr(e,t,r){const{tokens:n,walk:s}=t,o=t.parent,a=o.body.at(-1),i=n[t.nextIndex];if(!r.isCheckingRangeEnd&&a&&a.type!=="CharacterClass"&&a.type!=="CharacterClassRange"&&i&&i.type!=="CharacterClassOpen"&&i.type!=="CharacterClassClose"&&i.type!=="CharacterClassIntersector"){const u=s(o,{...r,isCheckingRangeEnd:!0});if(a.type==="Character"&&u.type==="Character")return o.body.pop(),Ur(a,u);throw new Error("Invalid character class range")}return we(ne("-"))}function Nr({negate:e},t,r){const{tokens:n,walk:s}=t,o=n[t.nextIndex],a=[ge()];let i=Ye(o);for(;i.type!=="CharacterClassClose";){if(i.type==="CharacterClassIntersector")a.push(ge()),t.nextIndex++;else{const c=a.at(-1);c.body.push(s(c,r))}i=Ye(n[t.nextIndex],o)}const u=ge({negate:e});return a.length===1?u.body=a[0].body:(u.kind="intersection",u.body=a.map(c=>c.body.length===1?c.body[0]:c)),t.nextIndex++,u}function Lr({kind:e,negate:t,value:r},n){const{normalizeUnknownPropertyNames:s,skipPropertyNameValidation:o,unicodePropertyMap:a}=n;if(e==="property"){const i=ye(r);if(Ue.has(i)&&!(a!=null&&a.has(i)))e="posix",r=i;else return te(r,{negate:t,normalizeUnknownPropertyNames:s,skipPropertyNameValidation:o,unicodePropertyMap:a})}return e==="posix"?Br(r,{negate:t}):Pe(e,{negate:t})}function Pr(e,t,r){const{tokens:n,capturingGroups:s,namedGroupsByName:o,skipLookbehindValidation:a,walk:i}=t,u=zr(e),c=u.type==="AbsenceFunction",l=Ke(u),p=l&&u.negate;if(u.type==="CapturingGroup"&&(s.push(u),u.name&&rr(o,u.name,[]).push(u)),c&&r.isInAbsenceFunction)throw new Error("Nested absence function not supported by Oniguruma");let f=et(n[t.nextIndex]);for(;f.type!=="GroupClose";){if(f.type==="Alternator")u.body.push(q()),t.nextIndex++;else{const g=u.body.at(-1),d=i(g,{...r,isInAbsenceFunction:r.isInAbsenceFunction||c,isInLookbehind:r.isInLookbehind||l,isInNegLookbehind:r.isInNegLookbehind||p});if(g.body.push(d),(l||r.isInLookbehind)&&!a){const m="Lookbehind includes a pattern not allowed by Oniguruma";if(p||r.isInNegLookbehind){if(Je(d)||d.type==="CapturingGroup")throw new Error(m)}else if(Je(d)||Ke(d)&&d.negate)throw new Error(m)}}f=et(n[t.nextIndex])}return t.nextIndex++,u}function Fr({kind:e,min:t,max:r},n){const s=n.parent,o=s.body.at(-1);if(!o||!Ar(o))throw new Error("Quantifier requires a repeatable token");const a=xt(e,t,r,o);return s.body.pop(),a}function Gr({raw:e},t){const{capturingGroups:r,subroutines:n}=t;let s=e.slice(3,-1);const o=/^(?<sign>[-+]?)0*(?<num>[1-9]\d*)$/.exec(s);if(o){const i=+o.groups.num,u=r.length;if(t.hasNumberedRef=!0,s={"":i,"+":u+i,"-":u+1-i}[o.groups.sign],s<1)throw new Error("Invalid subroutine number")}else s==="0"&&(s=0);const a=kt(s);return n.push(a),a}function Rr(e,t){return{type:"AbsenceFunction",kind:e,body:ce(t==null?void 0:t.body)}}function q(e){return{type:"Alternative",body:Et(e==null?void 0:e.body)}}function Ne(e,t){const r={type:"Assertion",kind:e};return(e==="word_boundary"||e==="text_segment_boundary")&&(r.negate=!!(t!=null&&t.negate)),r}function Le(e,t){const r=!!(t!=null&&t.orphan);return{type:"Backreference",ref:e,...r&&{orphan:r}}}function bt(e,t){const r={name:void 0,isSubroutined:!1,...t};if(r.name!==void 0&&!Hr(r.name))throw new Error(`Group name "${r.name}" invalid in Oniguruma`);return{type:"CapturingGroup",number:e,...r.name&&{name:r.name},...r.isSubroutined&&{isSubroutined:r.isSubroutined},body:ce(t==null?void 0:t.body)}}function we(e,t){const r={useLastValid:!1,...t};if(e>1114111){const n=e.toString(16);if(r.useLastValid)e=1114111;else throw e>1310719?new Error(`Invalid code point out of range "\\x{${n}}"`):new Error(`Invalid code point out of range in JS "\\x{${n}}"`)}return{type:"Character",value:e}}function ge(e){const t={kind:"union",negate:!1,...e};return{type:"CharacterClass",kind:t.kind,negate:t.negate,body:Et(e==null?void 0:e.body)}}function Ur(e,t){if(t.value<e.value)throw new Error("Character class range out of order");return{type:"CharacterClassRange",min:e,max:t}}function Pe(e,t){const r=!!(t!=null&&t.negate),n={type:"CharacterSet",kind:e};return(e==="digit"||e==="hex"||e==="newline"||e==="space"||e==="word")&&(n.negate=r),(e==="text_segment"||e==="newline"&&!r)&&(n.variableLength=!0),n}function Dr(e,t={}){if(e==="keep")return{type:"Directive",kind:e};if(e==="flags")return{type:"Directive",kind:e,flags:se(t.flags)};throw new Error(`Unexpected directive kind "${e}"`)}function Or(e){return{type:"Flags",...e}}function N(e){const t=e==null?void 0:e.atomic,r=e==null?void 0:e.flags;if(t&&r)throw new Error("Atomic group cannot have flags");return{type:"Group",...t&&{atomic:t},...r&&{flags:r},body:ce(e==null?void 0:e.body)}}function W(e){const t={behind:!1,negate:!1,...e};return{type:"LookaroundAssertion",kind:t.behind?"lookbehind":"lookahead",negate:t.negate,body:ce(e==null?void 0:e.body)}}function Tr(e,t,r){return{type:"NamedCallout",kind:e,tag:t,arguments:r}}function Br(e,t){const r=!!(t!=null&&t.negate);if(!Ue.has(e))throw new Error(`Invalid POSIX class "${e}"`);return{type:"CharacterSet",kind:"posix",value:e,negate:r}}function xt(e,t,r,n){if(t>r)throw new Error("Invalid reversed quantifier range");return{type:"Quantifier",kind:e,min:t,max:r,body:n}}function Vr(e,t){return{type:"Regex",body:ce(t==null?void 0:t.body),flags:e}}function kt(e){return{type:"Subroutine",ref:e}}function te(e,t){var s;const r={negate:!1,normalizeUnknownPropertyNames:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...t};let n=(s=r.unicodePropertyMap)==null?void 0:s.get(ye(e));if(!n){if(r.normalizeUnknownPropertyNames)n=Wr(e);else if(r.unicodePropertyMap&&!r.skipPropertyNameValidation)throw new Error(x`Invalid Unicode property "\p{${e}}"`)}return{type:"CharacterSet",kind:"property",value:n??e,negate:r.negate}}function zr({flags:e,kind:t,name:r,negate:n,number:s}){switch(t){case"absence_repeater":return Rr("repeater");case"atomic":return N({atomic:!0});case"capturing":return bt(s,{name:r});case"group":return N({flags:e});case"lookahead":case"lookbehind":return W({behind:t==="lookbehind",negate:n});default:throw new Error(`Unexpected group kind "${t}"`)}}function ce(e){if(e===void 0)e=[q()];else if(!Array.isArray(e)||!e.length||!e.every(t=>t.type==="Alternative"))throw new Error("Invalid body; expected array of one or more Alternative nodes");return e}function Et(e){if(e===void 0)e=[];else if(!Array.isArray(e)||!e.every(t=>!!t.type))throw new Error("Invalid body; expected array of nodes");return e}function Je(e){return e.type==="LookaroundAssertion"&&e.kind==="lookahead"}function Ke(e){return e.type==="LookaroundAssertion"&&e.kind==="lookbehind"}function Hr(e){return/^[\p{Alpha}\p{Pc}][^)]*$/u.test(e)}function Wr(e){return e.trim().replace(/[- _]+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,t=>t[0].toUpperCase()+t.slice(1).toLowerCase())}function ye(e){return e.replace(/[- _]+/g,"").toLowerCase()}function Ye(e,t){return se(e,`${(t==null?void 0:t.type)==="Character"&&t.value===93?"Empty":"Unclosed"} character class`)}function et(e){return se(e,"Unclosed group")}function ae(e,t,r=null){function n(o,a){for(let i=0;i<o.length;i++){const u=s(o[i],a,i,o);i=Math.max(-1,i+u)}}function s(o,a=null,i=null,u=null){var $,_;let c=0,l=!1;const p={node:o,parent:a,key:i,container:u,root:e,remove(){fe(u).splice(Math.max(0,K(i)+c),1),c--,l=!0},removeAllNextSiblings(){return fe(u).splice(K(i)+1)},removeAllPrevSiblings(){const y=K(i)+c;return c-=y,fe(u).splice(0,Math.max(0,y))},replaceWith(y,k={}){const v=!!k.traverse;u?u[Math.max(0,K(i)+c)]=y:se(a,"Can't replace root node")[i]=y,v&&s(y,a,i,u),l=!0},replaceWithMultiple(y,k={}){const v=!!k.traverse;if(fe(u).splice(Math.max(0,K(i)+c),1,...y),c+=y.length-1,v){let V=0;for(let S=0;S<y.length;S++)V+=s(y[S],a,K(i)+S+V,u)}l=!0},skip(){l=!0}},{type:f}=o,g=t["*"],d=t[f],m=typeof g=="function"?g:g==null?void 0:g.enter,w=typeof d=="function"?d:d==null?void 0:d.enter;if(m==null||m(p,r),w==null||w(p,r),!l)switch(f){case"AbsenceFunction":case"CapturingGroup":case"Group":n(o.body,o);break;case"Alternative":case"CharacterClass":n(o.body,o);break;case"Assertion":case"Backreference":case"Character":case"CharacterSet":case"Directive":case"Flags":case"NamedCallout":case"Subroutine":break;case"CharacterClassRange":s(o.min,o,"min"),s(o.max,o,"max");break;case"LookaroundAssertion":n(o.body,o);break;case"Quantifier":s(o.body,o,"body");break;case"Regex":n(o.body,o),s(o.flags,o,"flags");break;default:throw new Error(`Unexpected node type "${f}"`)}return($=d==null?void 0:d.exit)==null||$.call(d,p,r),(_=g==null?void 0:g.exit)==null||_.call(g,p,r),c}return s(e),e}function fe(e){if(!Array.isArray(e))throw new Error("Container expected");return e}function K(e){if(typeof e!="number")throw new Error("Numeric key expected");return e}const jr=String.raw`\(\?(?:[:=!>A-Za-z\-]|<[=!]|\(DEFINE\))`;function Xr(e,t){for(let r=0;r<e.length;r++)e[r]>=t&&e[r]++}function Zr(e,t,r,n){return e.slice(0,t)+n+e.slice(t+r.length)}const I=Object.freeze({DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS"});function Oe(e,t,r,n){const s=new RegExp(String.raw`${t}|(?<$skip>\[\^?|\\?.)`,"gsu"),o=[!1];let a=0,i="";for(const u of e.matchAll(s)){const{0:c,groups:{$skip:l}}=u;if(!l&&(!n||n===I.DEFAULT==!a)){r instanceof Function?i+=r(u,{context:a?I.CHAR_CLASS:I.DEFAULT,negated:o[o.length-1]}):i+=r;continue}c[0]==="["?(a++,o.push(c[1]==="^")):c==="]"&&a&&(a--,o.pop()),i+=c}return i}function $t(e,t,r,n){Oe(e,t,r,n)}function Qr(e,t,r=0,n){if(!new RegExp(t,"su").test(e))return null;const s=new RegExp(`${t}|(?<$skip>\\\\?.)`,"gsu");s.lastIndex=r;let o=0,a;for(;a=s.exec(e);){const{0:i,groups:{$skip:u}}=a;if(!u&&(!n||n===I.DEFAULT==!o))return a;i==="["?o++:i==="]"&&o&&o--,s.lastIndex==a.index&&s.lastIndex++}return null}function de(e,t,r){return!!Qr(e,t,0,r)}function qr(e,t){const r=/\\?./gsu;r.lastIndex=t;let n=e.length,s=0,o=1,a;for(;a=r.exec(e);){const[i]=a;if(i==="[")s++;else if(s)i==="]"&&s--;else if(i==="(")o++;else if(i===")"&&(o--,!o)){n=a.index;break}}return e.slice(t,n)}const tt=new RegExp(String.raw`(?<noncapturingStart>${jr})|(?<capturingStart>\((?:\?<[^>]+>)?)|\\?.`,"gsu");function Jr(e,t){const r=(t==null?void 0:t.hiddenCaptures)??[];let n=(t==null?void 0:t.captureTransfers)??new Map;if(!/\(\?>/.test(e))return{pattern:e,captureTransfers:n,hiddenCaptures:r};const s="(?>",o="(?:(?=(",a=[0],i=[];let u=0,c=0,l=NaN,p;do{p=!1;let f=0,g=0,d=!1,m;for(tt.lastIndex=Number.isNaN(l)?0:l+o.length;m=tt.exec(e);){const{0:w,index:$,groups:{capturingStart:_,noncapturingStart:y}}=m;if(w==="[")f++;else if(f)w==="]"&&f--;else if(w===s&&!d)l=$,d=!0;else if(d&&y)g++;else if(_)d?g++:(u++,a.push(u+c));else if(w===")"&&d){if(!g){c++;const k=u+c;if(e=`${e.slice(0,l)}${o}${e.slice(l+s.length,$)}))<$$${k}>)${e.slice($+1)}`,p=!0,i.push(k),Xr(r,k),n.size){const v=new Map;n.forEach((V,S)=>{v.set(S>=k?S+1:S,V.map(J=>J>=k?J+1:J))}),n=v}break}g--}}}while(p);return r.push(...i),e=Oe(e,String.raw`\\(?<backrefNum>[1-9]\d*)|<\$\$(?<wrappedBackrefNum>\d+)>`,({0:f,groups:{backrefNum:g,wrappedBackrefNum:d}})=>{if(g){const m=+g;if(m>a.length-1)throw new Error(`Backref "${f}" greater than number of captures`);return`\\${a[m]}`}return`\\${d}`},I.DEFAULT),{pattern:e,captureTransfers:n,hiddenCaptures:r}}const _t=String.raw`(?:[?*+]|\{\d+(?:,\d*)?\})`,_e=new RegExp(String.raw`
\\(?: \d+
  | c[A-Za-z]
  | [gk]<[^>]+>
  | [pPu]\{[^\}]+\}
  | u[A-Fa-f\d]{4}
  | x[A-Fa-f\d]{2}
  )
| \((?: \? (?: [:=!>]
  | <(?:[=!]|[^>]+>)
  | [A-Za-z\-]+:
  | \(DEFINE\)
  ))?
| (?<qBase>${_t})(?<qMod>[?+]?)(?<invalidQ>[?*+\{]?)
| \\?.
`.replace(/\s+/g,""),"gsu");function Kr(e){if(!new RegExp(`${_t}\\+`).test(e))return{pattern:e};const t=[];let r=null,n=null,s="",o=0,a;for(_e.lastIndex=0;a=_e.exec(e);){const{0:i,index:u,groups:{qBase:c,qMod:l,invalidQ:p}}=a;if(i==="[")o||(n=u),o++;else if(i==="]")o?o--:n=null;else if(!o)if(l==="+"&&s&&!s.startsWith("(")){if(p)throw new Error(`Invalid quantifier "${i}"`);let f=-1;if(/^\{\d+\}$/.test(c))e=Zr(e,u+c.length,l,"");else{if(s===")"||s==="]"){const g=s===")"?r:n;if(g===null)throw new Error(`Invalid unmatched "${s}"`);e=`${e.slice(0,g)}(?>${e.slice(g,u)}${c})${e.slice(u+i.length)}`}else e=`${e.slice(0,u-s.length)}(?>${s}${c})${e.slice(u+i.length)}`;f+=4}_e.lastIndex+=f}else i[0]==="("?t.push(u):i===")"&&(r=t.length?t.pop():null);s=i}return{pattern:e}}const A=String.raw,Yr=A`\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>`,Fe=A`\(\?R=(?<rDepth>[^\)]+)\)|${Yr}`,Ce=A`\(\?<(?![=!])(?<captureName>[^>]+)>`,At=A`${Ce}|(?<unnamed>\()(?!\?)`,H=new RegExp(A`${Ce}|${Fe}|\(\?|\\?.`,"gsu"),Ae="Cannot use multiple overlapping recursions";function en(e,t){const{hiddenCaptures:r,mode:n}={hiddenCaptures:[],mode:"plugin",...t};let s=(t==null?void 0:t.captureTransfers)??new Map;if(!new RegExp(Fe,"su").test(e))return{pattern:e,captureTransfers:s,hiddenCaptures:r};if(n==="plugin"&&de(e,A`\(\?\(DEFINE\)`,I.DEFAULT))throw new Error("DEFINE groups cannot be used with recursion");const o=[],a=de(e,A`\\[1-9]`,I.DEFAULT),i=new Map,u=[];let c=!1,l=0,p=0,f;for(H.lastIndex=0;f=H.exec(e);){const{0:g,groups:{captureName:d,rDepth:m,gRNameOrNum:w,gRDepth:$}}=f;if(g==="[")l++;else if(l)g==="]"&&l--;else if(m){if(rt(m),c)throw new Error(Ae);if(a)throw new Error(`${n==="external"?"Backrefs":"Numbered backrefs"} cannot be used with global recursion`);const _=e.slice(0,f.index),y=e.slice(H.lastIndex);if(de(y,Fe,I.DEFAULT))throw new Error(Ae);const k=+m-1;e=nt(_,y,k,!1,r,o,p),s=ot(s,_,k,o.length,0,p);break}else if(w){rt($);let _=!1;for(const oe of u)if(oe.name===w||oe.num===+w){if(_=!0,oe.hasRecursedWithin)throw new Error(Ae);break}if(!_)throw new Error(A`Recursive \g cannot be used outside the referenced group "${n==="external"?w:A`\g<${w}&R=${$}>`}"`);const y=i.get(w),k=qr(e,y);if(a&&de(k,A`${Ce}|\((?!\?)`,I.DEFAULT))throw new Error(`${n==="external"?"Backrefs":"Numbered backrefs"} cannot be used with recursion of capturing groups`);const v=e.slice(y,f.index),V=k.slice(v.length+g.length),S=o.length,J=+$-1,Ve=nt(v,V,J,!0,r,o,p);s=ot(s,v,J,o.length-S,S,p);const Dt=e.slice(0,y),Ot=e.slice(y+k.length);e=`${Dt}${Ve}${Ot}`,H.lastIndex+=Ve.length-g.length-v.length-V.length,u.forEach(oe=>oe.hasRecursedWithin=!0),c=!0}else if(d)p++,i.set(String(p),H.lastIndex),i.set(d,H.lastIndex),u.push({num:p,name:d});else if(g[0]==="("){const _=g==="(";_&&(p++,i.set(String(p),H.lastIndex)),u.push(_?{num:p}:{})}else g===")"&&u.pop()}return r.push(...o),{pattern:e,captureTransfers:s,hiddenCaptures:r}}function rt(e){const t=`Max depth must be integer between 2 and 100; used ${e}`;if(!/^[1-9]\d*$/.test(e))throw new Error(t);if(e=+e,e<2||e>100)throw new Error(t)}function nt(e,t,r,n,s,o,a){const i=new Set;n&&$t(e+t,Ce,({groups:{captureName:c}})=>{i.add(c)},I.DEFAULT);const u=[r,n?i:null,s,o,a];return`${e}${st(`(?:${e}`,"forward",...u)}(?:)${st(`${t})`,"backward",...u)}${t}`}function st(e,t,r,n,s,o,a){const u=l=>t==="forward"?l+2:r-l+2-1;let c="";for(let l=0;l<r;l++){const p=u(l);c+=Oe(e,A`${At}|\\k<(?<backref>[^>]+)>`,({0:f,groups:{captureName:g,unnamed:d,backref:m}})=>{if(m&&n&&!n.has(m))return f;const w=`_$${p}`;if(d||g){const $=a+o.length+1;return o.push($),tn(s,$),d?f:`(?<${g}${w}>`}return A`\k<${m}${w}>`},I.DEFAULT)}return c}function tn(e,t){for(let r=0;r<e.length;r++)e[r]>=t&&e[r]++}function ot(e,t,r,n,s,o){if(e.size&&n){let a=0;$t(t,At,()=>a++,I.DEFAULT);const i=o-a+s,u=new Map;return e.forEach((c,l)=>{const p=(n-a*r)/r,f=a*r,g=l>i+a?l+n:l,d=[];for(const m of c)if(m<=i)d.push(m);else if(m>i+a+p)d.push(m+n);else if(m<=i+a)for(let w=0;w<=r;w++)d.push(m+a*w);else for(let w=0;w<=r;w++)d.push(m+f+p*w);u.set(g,d)}),u}return e}var b=String.fromCodePoint,h=String.raw,R={flagGroups:(()=>{try{new RegExp("(?i:)")}catch{return!1}return!0})(),unicodeSets:(()=>{try{new RegExp("","v")}catch{return!1}return!0})()};R.bugFlagVLiteralHyphenIsRange=R.unicodeSets?(()=>{try{new RegExp(h`[\d\-a]`,"v")}catch{return!0}return!1})():!1;R.bugNestedClassIgnoresNegation=R.unicodeSets&&new RegExp("[[^a]]","v").test("a");function me(e,{enable:t,disable:r}){return{dotAll:!(r!=null&&r.dotAll)&&!!(t!=null&&t.dotAll||e.dotAll),ignoreCase:!(r!=null&&r.ignoreCase)&&!!(t!=null&&t.ignoreCase||e.ignoreCase)}}function ie(e,t,r){return e.has(t)||e.set(t,r),e.get(t)}function Ge(e,t){return at[e]>=at[t]}function rn(e,t){if(e==null)throw new Error(t??"Value expected");return e}var at={ES2025:2025,ES2024:2024,ES2018:2018},nn={auto:"auto",ES2025:"ES2025",ES2024:"ES2024",ES2018:"ES2018"};function It(e={}){if({}.toString.call(e)!=="[object Object]")throw new Error("Unexpected options");if(e.target!==void 0&&!nn[e.target])throw new Error(`Unexpected target "${e.target}"`);const t={accuracy:"default",avoidSubclass:!1,flags:"",global:!1,hasIndices:!1,lazyCompileLength:1/0,target:"auto",verbose:!1,...e,rules:{allowOrphanBackrefs:!1,asciiWordBoundaries:!1,captureGroup:!1,recursionLimit:20,singleline:!1,...e.rules}};return t.target==="auto"&&(t.target=R.flagGroups?"ES2025":R.unicodeSets?"ES2024":"ES2018"),t}var sn="[	-\r ]",on=new Set([b(304),b(305)]),L=h`[\p{L}\p{M}\p{N}\p{Pc}]`;function vt(e){if(on.has(e))return[e];const t=new Set,r=e.toLowerCase(),n=r.toUpperCase(),s=cn.get(r),o=an.get(r),a=un.get(r);return[...n].length===1&&t.add(n),a&&t.add(a),s&&t.add(s),t.add(r),o&&t.add(o),[...t]}var Te=new Map(`C Other
Cc Control cntrl
Cf Format
Cn Unassigned
Co Private_Use
Cs Surrogate
L Letter
LC Cased_Letter
Ll Lowercase_Letter
Lm Modifier_Letter
Lo Other_Letter
Lt Titlecase_Letter
Lu Uppercase_Letter
M Mark Combining_Mark
Mc Spacing_Mark
Me Enclosing_Mark
Mn Nonspacing_Mark
N Number
Nd Decimal_Number digit
Nl Letter_Number
No Other_Number
P Punctuation punct
Pc Connector_Punctuation
Pd Dash_Punctuation
Pe Close_Punctuation
Pf Final_Punctuation
Pi Initial_Punctuation
Po Other_Punctuation
Ps Open_Punctuation
S Symbol
Sc Currency_Symbol
Sk Modifier_Symbol
Sm Math_Symbol
So Other_Symbol
Z Separator
Zl Line_Separator
Zp Paragraph_Separator
Zs Space_Separator
ASCII
ASCII_Hex_Digit AHex
Alphabetic Alpha
Any
Assigned
Bidi_Control Bidi_C
Bidi_Mirrored Bidi_M
Case_Ignorable CI
Cased
Changes_When_Casefolded CWCF
Changes_When_Casemapped CWCM
Changes_When_Lowercased CWL
Changes_When_NFKC_Casefolded CWKCF
Changes_When_Titlecased CWT
Changes_When_Uppercased CWU
Dash
Default_Ignorable_Code_Point DI
Deprecated Dep
Diacritic Dia
Emoji
Emoji_Component EComp
Emoji_Modifier EMod
Emoji_Modifier_Base EBase
Emoji_Presentation EPres
Extended_Pictographic ExtPict
Extender Ext
Grapheme_Base Gr_Base
Grapheme_Extend Gr_Ext
Hex_Digit Hex
IDS_Binary_Operator IDSB
IDS_Trinary_Operator IDST
ID_Continue IDC
ID_Start IDS
Ideographic Ideo
Join_Control Join_C
Logical_Order_Exception LOE
Lowercase Lower
Math
Noncharacter_Code_Point NChar
Pattern_Syntax Pat_Syn
Pattern_White_Space Pat_WS
Quotation_Mark QMark
Radical
Regional_Indicator RI
Sentence_Terminal STerm
Soft_Dotted SD
Terminal_Punctuation Term
Unified_Ideograph UIdeo
Uppercase Upper
Variation_Selector VS
White_Space space
XID_Continue XIDC
XID_Start XIDS`.split(/\s/).map(e=>[ye(e),e])),an=new Map([["s",b(383)],[b(383),"s"]]),un=new Map([[b(223),b(7838)],[b(107),b(8490)],[b(229),b(8491)],[b(969),b(8486)]]),cn=new Map([U(453),U(456),U(459),U(498),...Ie(8072,8079),...Ie(8088,8095),...Ie(8104,8111),U(8124),U(8140),U(8188)]),ln=new Map([["alnum",h`[\p{Alpha}\p{Nd}]`],["alpha",h`\p{Alpha}`],["ascii",h`\p{ASCII}`],["blank",h`[\p{Zs}\t]`],["cntrl",h`\p{Cc}`],["digit",h`\p{Nd}`],["graph",h`[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]`],["lower",h`\p{Lower}`],["print",h`[[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]\p{Zs}]`],["punct",h`[\p{P}\p{S}]`],["space",h`\p{space}`],["upper",h`\p{Upper}`],["word",h`[\p{Alpha}\p{M}\p{Nd}\p{Pc}]`],["xdigit",h`\p{AHex}`]]);function pn(e,t){const r=[];for(let n=e;n<=t;n++)r.push(n);return r}function U(e){const t=b(e);return[t.toLowerCase(),t]}function Ie(e,t){return pn(e,t).map(r=>U(r))}var St=new Set(["Lower","Lowercase","Upper","Uppercase","Ll","Lowercase_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter"]);function fn(e,t){const r={accuracy:"default",asciiWordBoundaries:!1,avoidSubclass:!1,bestEffortTarget:"ES2025",...t};Mt(e);const n={accuracy:r.accuracy,asciiWordBoundaries:r.asciiWordBoundaries,avoidSubclass:r.avoidSubclass,flagDirectivesByAlt:new Map,jsGroupNameMap:new Map,minTargetEs2024:Ge(r.bestEffortTarget,"ES2024"),passedLookbehind:!1,strategy:null,subroutineRefMap:new Map,supportedGNodes:new Set,digitIsAscii:e.flags.digitIsAscii,spaceIsAscii:e.flags.spaceIsAscii,wordIsAscii:e.flags.wordIsAscii};ae(e,dn,n);const s={dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},o={currentFlags:s,prevFlags:null,globalFlags:s,groupOriginByCopy:new Map,groupsByName:new Map,multiplexCapturesToLeftByRef:new Map,openRefs:new Map,reffedNodesByReferencer:new Map,subroutineRefMap:n.subroutineRefMap};ae(e,gn,o);const a={groupsByName:o.groupsByName,highestOrphanBackref:0,numCapturesToLeft:0,reffedNodesByReferencer:o.reffedNodesByReferencer};return ae(e,hn,a),e._originMap=o.groupOriginByCopy,e._strategy=n.strategy,e}var dn={AbsenceFunction({node:e,parent:t,replaceWith:r}){const{body:n,kind:s}=e;if(s==="repeater"){const o=N();o.body[0].body.push(W({negate:!0,body:n}),te("Any"));const a=N();a.body[0].body.push(xt("greedy",0,1/0,o)),r(C(a,t),{traverse:!0})}else throw new Error('Unsupported absence function "(?~|"')},Alternative:{enter({node:e,parent:t,key:r},{flagDirectivesByAlt:n}){const s=e.body.filter(o=>o.kind==="flags");for(let o=r+1;o<t.body.length;o++){const a=t.body[o];ie(n,a,[]).push(...s)}},exit({node:e},{flagDirectivesByAlt:t}){var r;if((r=t.get(e))!=null&&r.length){const n=Lt(t.get(e));if(n){const s=N({flags:n});s.body[0].body=e.body,e.body=[C(s,e)]}}}},Assertion({node:e,parent:t,key:r,container:n,root:s,remove:o,replaceWith:a},i){const{kind:u,negate:c}=e,{asciiWordBoundaries:l,avoidSubclass:p,supportedGNodes:f,wordIsAscii:g}=i;if(u==="text_segment_boundary")throw new Error(`Unsupported text segment boundary "\\${c?"Y":"y"}"`);if(u==="line_end")a(C(W({body:[q({body:[Ne("string_end")]}),q({body:[we(10)]})]}),t));else if(u==="line_start")a(C(P(h`(?<=\A|\n(?!\z))`,{skipLookbehindValidation:!0}),t));else if(u==="search_start")if(f.has(e))s.flags.sticky=!0,o();else{const d=n[r-1];if(d&&xn(d))a(C(W({negate:!0}),t));else{if(p)throw new Error(h`Uses "\G" in a way that requires a subclass`);a(D(Ne("string_start"),t)),i.strategy="clip_search"}}else if(!(u==="string_end"||u==="string_start"))if(u==="string_end_newline")a(C(P(h`(?=\n?\z)`),t));else if(u==="word_boundary"){if(!g&&!l){const d=`(?:(?<=${L})(?!${L})|(?<!${L})(?=${L}))`,m=`(?:(?<=${L})(?=${L})|(?<!${L})(?!${L}))`;a(C(P(c?m:d),t))}}else throw new Error(`Unexpected assertion kind "${u}"`)},Backreference({node:e},{jsGroupNameMap:t}){let{ref:r}=e;typeof r=="string"&&!Se(r)&&(r=ve(r,t),e.ref=r)},CapturingGroup({node:e},{jsGroupNameMap:t,subroutineRefMap:r}){let{name:n}=e;n&&!Se(n)&&(n=ve(n,t),e.name=n),r.set(e.number,e),n&&r.set(n,e)},CharacterClassRange({node:e,parent:t,replaceWith:r}){if(t.kind==="intersection"){const n=ge({body:[e]});r(C(n,t),{traverse:!0})}},CharacterSet({node:e,parent:t,replaceWith:r},{accuracy:n,minTargetEs2024:s,digitIsAscii:o,spaceIsAscii:a,wordIsAscii:i}){const{kind:u,negate:c,value:l}=e;if(o&&(u==="digit"||l==="digit")){r(D(Pe("digit",{negate:c}),t));return}if(a&&(u==="space"||l==="space")){r(C(Me(P(sn),c),t));return}if(i&&(u==="word"||l==="word")){r(D(Pe("word",{negate:c}),t));return}if(u==="any")r(D(te("Any"),t));else if(u==="digit")r(D(te("Nd",{negate:c}),t));else if(u!=="dot")if(u==="text_segment"){if(n==="strict")throw new Error(h`Use of "\X" requires non-strict accuracy`);const p="\\p{Emoji}(?:\\p{EMod}|\\uFE0F\\u20E3?|[\\x{E0020}-\\x{E007E}]+\\x{E007F})?",f=h`\p{RI}{2}|${p}(?:\u200D${p})*`;r(C(P(h`(?>\r\n|${s?h`\p{RGI_Emoji}`:f}|\P{M}\p{M}*)`,{skipPropertyNameValidation:!0}),t))}else if(u==="hex")r(D(te("AHex",{negate:c}),t));else if(u==="newline")r(C(P(c?`[^
]`:`(?>\r
?|[
\v\f\u2028\u2029])`),t));else if(u==="posix")if(!s&&(l==="graph"||l==="print")){if(n==="strict")throw new Error(`POSIX class "${l}" requires min target ES2024 or non-strict accuracy`);let p={graph:"!-~",print:" -~"}[l];c&&(p=`\0-${b(p.codePointAt(0)-1)}${b(p.codePointAt(2)+1)}-􏿿`),r(C(P(`[${p}]`),t))}else r(C(Me(P(ln.get(l)),c),t));else if(u==="property")Te.has(ye(l))||(e.key="sc");else if(u==="space")r(D(te("space",{negate:c}),t));else if(u==="word")r(C(Me(P(L),c),t));else throw new Error(`Unexpected character set kind "${u}"`)},Directive({node:e,parent:t,root:r,remove:n,replaceWith:s,removeAllPrevSiblings:o,removeAllNextSiblings:a}){const{kind:i,flags:u}=e;if(i==="flags")if(!u.enable&&!u.disable)n();else{const c=N({flags:u});c.body[0].body=a(),s(C(c,t),{traverse:!0})}else if(i==="keep"){const c=r.body[0],p=r.body.length===1&&yt(c,{type:"Group"})&&c.body[0].body.length===1?c.body[0]:r;if(t.parent!==p||p.body.length>1)throw new Error(h`Uses "\K" in a way that's unsupported`);const f=W({behind:!0});f.body[0].body=o(),s(C(f,t))}else throw new Error(`Unexpected directive kind "${i}"`)},Flags({node:e,parent:t}){if(e.posixIsAscii)throw new Error('Unsupported flag "P"');if(e.textSegmentMode==="word")throw new Error('Unsupported flag "y{w}"');["digitIsAscii","extended","posixIsAscii","spaceIsAscii","wordIsAscii","textSegmentMode"].forEach(r=>delete e[r]),Object.assign(e,{global:!1,hasIndices:!1,multiline:!1,sticky:e.sticky??!1}),t.options={disable:{x:!0,n:!0},force:{v:!0}}},Group({node:e}){if(!e.flags)return;const{enable:t,disable:r}=e.flags;t!=null&&t.extended&&delete t.extended,r!=null&&r.extended&&delete r.extended,t!=null&&t.dotAll&&(r!=null&&r.dotAll)&&delete t.dotAll,t!=null&&t.ignoreCase&&(r!=null&&r.ignoreCase)&&delete t.ignoreCase,t&&!Object.keys(t).length&&delete e.flags.enable,r&&!Object.keys(r).length&&delete e.flags.disable,!e.flags.enable&&!e.flags.disable&&delete e.flags},LookaroundAssertion({node:e},t){const{kind:r}=e;r==="lookbehind"&&(t.passedLookbehind=!0)},NamedCallout({node:e,parent:t,replaceWith:r}){const{kind:n}=e;if(n==="fail")r(C(W({negate:!0}),t));else throw new Error(`Unsupported named callout "(*${n.toUpperCase()}"`)},Quantifier({node:e}){if(e.body.type==="Quantifier"){const t=N();t.body[0].body.push(e.body),e.body=C(t,e)}},Regex:{enter({node:e},{supportedGNodes:t}){const r=[];let n=!1,s=!1;for(const o of e.body)if(o.body.length===1&&o.body[0].kind==="search_start")o.body.pop();else{const a=Ft(o.body);a?(n=!0,Array.isArray(a)?r.push(...a):r.push(a)):s=!0}n&&!s&&r.forEach(o=>t.add(o))},exit(e,{accuracy:t,passedLookbehind:r,strategy:n}){if(t==="strict"&&r&&n)throw new Error(h`Uses "\G" in a way that requires non-strict accuracy`)}},Subroutine({node:e},{jsGroupNameMap:t}){let{ref:r}=e;typeof r=="string"&&!Se(r)&&(r=ve(r,t),e.ref=r)}},gn={Backreference({node:e},{multiplexCapturesToLeftByRef:t,reffedNodesByReferencer:r}){const{orphan:n,ref:s}=e;n||r.set(e,[...t.get(s).map(({node:o})=>o)])},CapturingGroup:{enter({node:e,parent:t,replaceWith:r,skip:n},{groupOriginByCopy:s,groupsByName:o,multiplexCapturesToLeftByRef:a,openRefs:i,reffedNodesByReferencer:u}){const c=s.get(e);if(c&&i.has(e.number)){const p=D(it(e.number),t);u.set(p,i.get(e.number)),r(p);return}i.set(e.number,e),a.set(e.number,[]),e.name&&ie(a,e.name,[]);const l=a.get(e.name??e.number);for(let p=0;p<l.length;p++){const f=l[p];if(c===f.node||c&&c===f.origin||e===f.origin){l.splice(p,1);break}}if(a.get(e.number).push({node:e,origin:c}),e.name&&a.get(e.name).push({node:e,origin:c}),e.name){const p=ie(o,e.name,new Map);let f=!1;if(c)f=!0;else for(const g of p.values())if(!g.hasDuplicateNameToRemove){f=!0;break}o.get(e.name).set(e,{node:e,hasDuplicateNameToRemove:f})}},exit({node:e},{openRefs:t}){t.delete(e.number)}},Group:{enter({node:e},t){t.prevFlags=t.currentFlags,e.flags&&(t.currentFlags=me(t.currentFlags,e.flags))},exit(e,t){t.currentFlags=t.prevFlags}},Subroutine({node:e,parent:t,replaceWith:r},n){const{isRecursive:s,ref:o}=e;if(s){let l=t;for(;(l=l.parent)&&!(l.type==="CapturingGroup"&&(l.name===o||l.number===o)););n.reffedNodesByReferencer.set(e,l);return}const a=n.subroutineRefMap.get(o),i=o===0,u=i?it(0):Nt(a,n.groupOriginByCopy,null);let c=u;if(!i){const l=Lt(yn(a,f=>f.type==="Group"&&!!f.flags)),p=l?me(n.globalFlags,l):n.globalFlags;mn(p,n.currentFlags)||(c=N({flags:Cn(p)}),c.body[0].body.push(u))}r(C(c,t),{traverse:!i})}},hn={Backreference({node:e,parent:t,replaceWith:r},n){if(e.orphan){n.highestOrphanBackref=Math.max(n.highestOrphanBackref,e.ref);return}const o=n.reffedNodesByReferencer.get(e).filter(a=>wn(a,e));if(!o.length)r(C(W({negate:!0}),t));else if(o.length>1){const a=N({atomic:!0,body:o.reverse().map(i=>q({body:[Le(i.number)]}))});r(C(a,t))}else e.ref=o[0].number},CapturingGroup({node:e},t){e.number=++t.numCapturesToLeft,e.name&&t.groupsByName.get(e.name).get(e).hasDuplicateNameToRemove&&delete e.name},Regex:{exit({node:e},t){const r=Math.max(t.highestOrphanBackref-t.numCapturesToLeft,0);for(let n=0;n<r;n++){const s=bt();e.body.at(-1).body.push(s)}}},Subroutine({node:e},t){!e.isRecursive||e.ref===0||(e.ref=t.reffedNodesByReferencer.get(e).number)}};function Mt(e){ae(e,{"*"({node:t,parent:r}){t.parent=r}})}function mn(e,t){return e.dotAll===t.dotAll&&e.ignoreCase===t.ignoreCase}function wn(e,t){let r=t;do{if(r.type==="Regex")return!1;if(r.type==="Alternative")continue;if(r===e)return!1;const n=Pt(r.parent);for(const s of n){if(s===r)break;if(s===e||Gt(s,e))return!0}}while(r=r.parent);throw new Error("Unexpected path")}function Nt(e,t,r,n){const s=Array.isArray(e)?[]:{};for(const[o,a]of Object.entries(e))o==="parent"?s.parent=Array.isArray(r)?n:r:a&&typeof a=="object"?s[o]=Nt(a,t,s,r):(o==="type"&&a==="CapturingGroup"&&t.set(s,t.get(e)??e),s[o]=a);return s}function it(e){const t=kt(e);return t.isRecursive=!0,t}function yn(e,t){const r=[];for(;e=e.parent;)(!t||t(e))&&r.push(e);return r}function ve(e,t){if(t.has(e))return t.get(e);const r=`$${t.size}_${e.replace(/^[^$_\p{IDS}]|[^$\u200C\u200D\p{IDC}]/ug,"_")}`;return t.set(e,r),r}function Lt(e){const t=["dotAll","ignoreCase"],r={enable:{},disable:{}};return e.forEach(({flags:n})=>{t.forEach(s=>{var o,a;(o=n.enable)!=null&&o[s]&&(delete r.disable[s],r.enable[s]=!0),(a=n.disable)!=null&&a[s]&&(r.disable[s]=!0)})}),Object.keys(r.enable).length||delete r.enable,Object.keys(r.disable).length||delete r.disable,r.enable||r.disable?r:null}function Cn({dotAll:e,ignoreCase:t}){const r={};return(e||t)&&(r.enable={},e&&(r.enable.dotAll=!0),t&&(r.enable.ignoreCase=!0)),(!e||!t)&&(r.disable={},!e&&(r.disable.dotAll=!0),!t&&(r.disable.ignoreCase=!0)),r}function Pt(e){if(!e)throw new Error("Node expected");const{body:t}=e;return Array.isArray(t)?t:t?[t]:null}function Ft(e){const t=e.find(r=>r.kind==="search_start"||kn(r,{negate:!1})||!bn(r));if(!t)return null;if(t.kind==="search_start")return t;if(t.type==="LookaroundAssertion")return t.body[0].body[0];if(t.type==="CapturingGroup"||t.type==="Group"){const r=[];for(const n of t.body){const s=Ft(n.body);if(!s)return null;Array.isArray(s)?r.push(...s):r.push(s)}return r}return null}function Gt(e,t){const r=Pt(e)??[];for(const n of r)if(n===t||Gt(n,t))return!0;return!1}function bn({type:e}){return e==="Assertion"||e==="Directive"||e==="LookaroundAssertion"}function xn(e){const t=["Character","CharacterClass","CharacterSet"];return t.includes(e.type)||e.type==="Quantifier"&&e.min&&t.includes(e.body.type)}function kn(e,t){const r={negate:null,...t};return e.type==="LookaroundAssertion"&&(r.negate===null||e.negate===r.negate)&&e.body.length===1&&yt(e.body[0],{type:"Assertion",kind:"search_start"})}function Se(e){return/^[$_\p{IDS}][$\u200C\u200D\p{IDC}]*$/u.test(e)}function P(e,t){const n=Ct(e,{...t,unicodePropertyMap:Te}).body;return n.length>1||n[0].body.length>1?N({body:n}):n[0].body[0]}function Me(e,t){return e.negate=t,e}function D(e,t){return e.parent=t,e}function C(e,t){return Mt(e),e.parent=t,e}function En(e,t){const r=It(t),n=Ge(r.target,"ES2024"),s=Ge(r.target,"ES2025"),o=r.rules.recursionLimit;if(!Number.isInteger(o)||o<2||o>20)throw new Error("Invalid recursionLimit; use 2-20");let a=null,i=null;if(!s){const g=[e.flags.ignoreCase];ae(e,$n,{getCurrentModI:()=>g.at(-1),popModI(){g.pop()},pushModI(d){g.push(d)},setHasCasedChar(){g.at(-1)?a=!0:i=!0}})}const u={dotAll:e.flags.dotAll,ignoreCase:!!((e.flags.ignoreCase||a)&&!i)};let c=e;const l={accuracy:r.accuracy,appliedGlobalFlags:u,captureMap:new Map,currentFlags:{dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},inCharClass:!1,lastNode:c,originMap:e._originMap,recursionLimit:o,useAppliedIgnoreCase:!!(!s&&a&&i),useFlagMods:s,useFlagV:n,verbose:r.verbose};function p(g){return l.lastNode=c,c=g,rn(_n[g.type],`Unexpected node type "${g.type}"`)(g,l,p)}const f={pattern:e.body.map(p).join("|"),flags:p(e.flags),options:{...e.options}};return n||(delete f.options.force.v,f.options.disable.v=!0,f.options.unicodeSetsPlugin=null),f._captureTransfers=new Map,f._hiddenCaptures=[],l.captureMap.forEach((g,d)=>{g.hidden&&f._hiddenCaptures.push(d),g.transferTo&&ie(f._captureTransfers,g.transferTo,[]).push(d)}),f}var $n={"*":{enter({node:e},t){if(ct(e)){const r=t.getCurrentModI();t.pushModI(e.flags?me({ignoreCase:r},e.flags).ignoreCase:r)}},exit({node:e},t){ct(e)&&t.popModI()}},Backreference(e,t){t.setHasCasedChar()},Character({node:e},t){Be(b(e.value))&&t.setHasCasedChar()},CharacterClassRange({node:e,skip:t},r){t(),Rt(e,{firstOnly:!0}).length&&r.setHasCasedChar()},CharacterSet({node:e},t){e.kind==="property"&&St.has(e.value)&&t.setHasCasedChar()}},_n={Alternative({body:e},t,r){return e.map(r).join("")},Assertion({kind:e,negate:t}){if(e==="string_end")return"$";if(e==="string_start")return"^";if(e==="word_boundary")return t?h`\B`:h`\b`;throw new Error(`Unexpected assertion kind "${e}"`)},Backreference({ref:e},t){if(typeof e!="number")throw new Error("Unexpected named backref in transformed AST");if(!t.useFlagMods&&t.accuracy==="strict"&&t.currentFlags.ignoreCase&&!t.captureMap.get(e).ignoreCase)throw new Error("Use of case-insensitive backref to case-sensitive group requires target ES2025 or non-strict accuracy");return"\\"+e},CapturingGroup(e,t,r){const{body:n,name:s,number:o}=e,a={ignoreCase:t.currentFlags.ignoreCase},i=t.originMap.get(e);return i&&(a.hidden=!0,o>i.number&&(a.transferTo=i.number)),t.captureMap.set(o,a),`(${s?`?<${s}>`:""}${n.map(r).join("|")})`},Character({value:e},t){const r=b(e),n=Y(e,{escDigit:t.lastNode.type==="Backreference",inCharClass:t.inCharClass,useFlagV:t.useFlagV});if(n!==r)return n;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase&&Be(r)){const s=vt(r);return t.inCharClass?s.join(""):s.length>1?`[${s.join("")}]`:s[0]}return r},CharacterClass(e,t,r){const{kind:n,negate:s,parent:o}=e;let{body:a}=e;if(n==="intersection"&&!t.useFlagV)throw new Error("Use of class intersection requires min target ES2024");R.bugFlagVLiteralHyphenIsRange&&t.useFlagV&&a.some(lt)&&(a=[we(45),...a.filter(c=>!lt(c))]);const i=()=>`[${s?"^":""}${a.map(r).join(n==="intersection"?"&&":"")}]`;if(!t.inCharClass){if((!t.useFlagV||R.bugNestedClassIgnoresNegation)&&!s){const l=a.filter(p=>p.type==="CharacterClass"&&p.kind==="union"&&p.negate);if(l.length){const p=N(),f=p.body[0];return p.parent=o,f.parent=p,a=a.filter(g=>!l.includes(g)),e.body=a,a.length?(e.parent=f,f.body.push(e)):p.body.pop(),l.forEach(g=>{const d=q({body:[g]});g.parent=d,d.parent=p,p.body.push(d)}),r(p)}}t.inCharClass=!0;const c=i();return t.inCharClass=!1,c}const u=a[0];if(n==="union"&&!s&&u&&((!t.useFlagV||!t.verbose)&&o.kind==="union"&&!(R.bugFlagVLiteralHyphenIsRange&&t.useFlagV)||!t.verbose&&o.kind==="intersection"&&a.length===1&&u.type!=="CharacterClassRange"))return a.map(r).join("");if(!t.useFlagV&&o.type==="CharacterClass")throw new Error("Use of nested character class requires min target ES2024");return i()},CharacterClassRange(e,t){const r=e.min.value,n=e.max.value,s={escDigit:!1,inCharClass:!0,useFlagV:t.useFlagV},o=Y(r,s),a=Y(n,s),i=new Set;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase){const u=Rt(e);Mn(u).forEach(l=>{i.add(Array.isArray(l)?`${Y(l[0],s)}-${Y(l[1],s)}`:Y(l,s))})}return`${o}-${a}${[...i].join("")}`},CharacterSet({kind:e,negate:t,value:r,key:n},s){if(e==="dot")return s.currentFlags.dotAll?s.appliedGlobalFlags.dotAll||s.useFlagMods?".":"[^]":h`[^\n]`;if(e==="digit")return t?h`\D`:h`\d`;if(e==="property"){if(s.useAppliedIgnoreCase&&s.currentFlags.ignoreCase&&St.has(r))throw new Error(`Unicode property "${r}" can't be case-insensitive when other chars have specific case`);return`${t?h`\P`:h`\p`}{${n?`${n}=`:""}${r}}`}if(e==="word")return t?h`\W`:h`\w`;throw new Error(`Unexpected character set kind "${e}"`)},Flags(e,t){return(t.appliedGlobalFlags.ignoreCase?"i":"")+(e.dotAll?"s":"")+(e.sticky?"y":"")},Group({atomic:e,body:t,flags:r,parent:n},s,o){const a=s.currentFlags;r&&(s.currentFlags=me(a,r));const i=t.map(o).join("|"),u=!s.verbose&&t.length===1&&n.type!=="Quantifier"&&!e&&(!s.useFlagMods||!r)?i:`(?${Nn(e,r,s.useFlagMods)}${i})`;return s.currentFlags=a,u},LookaroundAssertion({body:e,kind:t,negate:r},n,s){return`(?${`${t==="lookahead"?"":"<"}${r?"!":"="}`}${e.map(s).join("|")})`},Quantifier(e,t,r){return r(e.body)+Ln(e)},Subroutine({isRecursive:e,ref:t},r){if(!e)throw new Error("Unexpected non-recursive subroutine in transformed AST");const n=r.recursionLimit;return t===0?`(?R=${n})`:h`\g<${t}&R=${n}>`}},An=new Set(["$","(",")","*","+",".","?","[","\\","]","^","{","|","}"]),In=new Set(["-","\\","]","^","["]),vn=new Set(["(",")","-","/","[","\\","]","^","{","|","}","!","#","$","%","&","*","+",",",".",":",";","<","=",">","?","@","`","~"]),ut=new Map([[9,h`\t`],[10,h`\n`],[11,h`\v`],[12,h`\f`],[13,h`\r`],[8232,h`\u2028`],[8233,h`\u2029`],[65279,h`\uFEFF`]]),Sn=new RegExp("^\\p{Cased}$","u");function Be(e){return Sn.test(e)}function Rt(e,t){const r=!!(t!=null&&t.firstOnly),n=e.min.value,s=e.max.value,o=[];if(n<65&&(s===65535||s>=131071)||n===65536&&s>=131071)return o;for(let a=n;a<=s;a++){const i=b(a);if(!Be(i))continue;const u=vt(i).filter(c=>{const l=c.codePointAt(0);return l<n||l>s});if(u.length&&(o.push(...u),r))break}return o}function Y(e,{escDigit:t,inCharClass:r,useFlagV:n}){if(ut.has(e))return ut.get(e);if(e<32||e>126&&e<160||e>262143||t&&Pn(e))return e>255?`\\u{${e.toString(16).toUpperCase()}}`:`\\x${e.toString(16).toUpperCase().padStart(2,"0")}`;const s=r?n?vn:In:An,o=b(e);return(s.has(o)?"\\":"")+o}function Mn(e){const t=e.map(s=>s.codePointAt(0)).sort((s,o)=>s-o),r=[];let n=null;for(let s=0;s<t.length;s++)t[s+1]===t[s]+1?n??(n=t[s]):n===null?r.push(t[s]):(r.push([n,t[s]]),n=null);return r}function Nn(e,t,r){if(e)return">";let n="";if(t&&r){const{enable:s,disable:o}=t;n=(s!=null&&s.ignoreCase?"i":"")+(s!=null&&s.dotAll?"s":"")+(o?"-":"")+(o!=null&&o.ignoreCase?"i":"")+(o!=null&&o.dotAll?"s":"")}return`${n}:`}function Ln({kind:e,max:t,min:r}){let n;return!r&&t===1?n="?":!r&&t===1/0?n="*":r===1&&t===1/0?n="+":r===t?n=`{${r}}`:n=`{${r},${t===1/0?"":t}}`,n+{greedy:"",lazy:"?",possessive:"+"}[e]}function ct({type:e}){return e==="CapturingGroup"||e==="Group"||e==="LookaroundAssertion"}function Pn(e){return e>47&&e<58}function lt({type:e,value:t}){return e==="Character"&&t===45}var O,F,Z,T,Q,ue,Re,B,Fn=(B=class extends RegExp{constructor(r,n,s){var t=(...as)=>(super(...as),z(this,ue),z(this,O,new Map),z(this,F,null),z(this,Z),z(this,T,null),z(this,Q,null),be(this,"rawOptions",{}),this);const o=!!(s!=null&&s.lazyCompile);if(r instanceof RegExp){if(s)throw new Error("Cannot provide options when copying a regexp");const a=r;t(a,n),M(this,Z,a.source),a instanceof B&&(M(this,O,E(a,O)),M(this,T,E(a,T)),M(this,Q,E(a,Q)),this.rawOptions=a.rawOptions)}else{const a={hiddenCaptures:[],strategy:null,transfers:[],...s};t(o?"":r,n),M(this,Z,r),M(this,O,Rn(a.hiddenCaptures,a.transfers)),M(this,Q,a.strategy),this.rawOptions=s??{}}o||M(this,F,this)}get source(){return E(this,Z)||"(?:)"}exec(r){if(!E(this,F)){const{lazyCompile:o,...a}=this.rawOptions;M(this,F,new B(E(this,Z),this.flags,a))}const n=this.global||this.sticky,s=this.lastIndex;if(E(this,Q)==="clip_search"&&n&&s){this.lastIndex=0;const o=ke(this,ue,Re).call(this,r.slice(s));return o&&(Gn(o,s,r,this.hasIndices),this.lastIndex+=s),o}return ke(this,ue,Re).call(this,r)}},O=new WeakMap,F=new WeakMap,Z=new WeakMap,T=new WeakMap,Q=new WeakMap,ue=new WeakSet,Re=function(r){E(this,F).lastIndex=this.lastIndex;const n=He(B.prototype,this,"exec").call(E(this,F),r);if(this.lastIndex=E(this,F).lastIndex,!n||!E(this,O).size)return n;const s=[...n];n.length=1;let o;this.hasIndices&&(o=[...n.indices],n.indices.length=1);const a=[0];for(let i=1;i<s.length;i++){const{hidden:u,transferTo:c}=E(this,O).get(i)??{};if(u?a.push(null):(a.push(n.length),n.push(s[i]),this.hasIndices&&n.indices.push(o[i])),c&&s[i]!==void 0){const l=a[c];if(!l)throw new Error(`Invalid capture transfer to "${l}"`);if(n[l]=s[i],this.hasIndices&&(n.indices[l]=o[i]),n.groups){E(this,T)||M(this,T,Un(this.source));const p=E(this,T).get(c);p&&(n.groups[p]=s[i],this.hasIndices&&(n.indices.groups[p]=o[i]))}}}return n},B);function Gn(e,t,r,n){if(e.index+=t,e.input=r,n){const s=e.indices;for(let a=0;a<s.length;a++){const i=s[a];i&&(s[a]=[i[0]+t,i[1]+t])}const o=s.groups;o&&Object.keys(o).forEach(a=>{const i=o[a];i&&(o[a]=[i[0]+t,i[1]+t])})}}function Rn(e,t){const r=new Map;for(const n of e)r.set(n,{hidden:!0});for(const[n,s]of t)for(const o of s)ie(r,o,{}).transferTo=n;return r}function Un(e){const t=/(?<capture>\((?:\?<(?![=!])(?<name>[^>]+)>|(?!\?)))|\\?./gsu,r=new Map;let n=0,s=0,o;for(;o=t.exec(e);){const{0:a,groups:{capture:i,name:u}}=o;a==="["?n++:n?a==="]"&&n--:i&&(s++,u&&r.set(s,u))}return r}function Dn(e,t){const r=On(e,t);return r.options?new Fn(r.pattern,r.flags,r.options):new RegExp(r.pattern,r.flags)}function On(e,t){const r=It(t),n=Ct(e,{flags:r.flags,normalizeUnknownPropertyNames:!0,rules:{captureGroup:r.rules.captureGroup,singleline:r.rules.singleline},skipBackrefValidation:r.rules.allowOrphanBackrefs,unicodePropertyMap:Te}),s=fn(n,{accuracy:r.accuracy,asciiWordBoundaries:r.rules.asciiWordBoundaries,avoidSubclass:r.avoidSubclass,bestEffortTarget:r.target}),o=En(s,r),a=en(o.pattern,{captureTransfers:o._captureTransfers,hiddenCaptures:o._hiddenCaptures,mode:"external"}),i=Kr(a.pattern),u=Jr(i.pattern,{captureTransfers:a.captureTransfers,hiddenCaptures:a.hiddenCaptures}),c={pattern:u.pattern,flags:`${r.hasIndices?"d":""}${r.global?"g":""}${o.flags}${o.options.disable.v?"u":"v"}`};if(r.avoidSubclass){if(r.lazyCompileLength!==1/0)throw new Error("Lazy compilation requires subclass")}else{const l=u.hiddenCaptures.sort((d,m)=>d-m),p=Array.from(u.captureTransfers),f=s._strategy,g=c.pattern.length>=r.lazyCompileLength;(l.length||p.length||f||g)&&(c.options={...l.length&&{hiddenCaptures:l},...p.length&&{transfers:p},...f&&{strategy:f},...g&&{lazyCompile:g}})}return c}const pt=4294967295;class Tn{constructor(t,r={}){be(this,"regexps");this.patterns=t,this.options=r;const{forgiving:n=!1,cache:s,regexConstructor:o}=r;if(!o)throw new Error("Option `regexConstructor` is not provided");this.regexps=t.map(a=>{if(typeof a!="string")return a;const i=s==null?void 0:s.get(a);if(i){if(i instanceof RegExp)return i;if(n)return null;throw i}try{const u=o(a);return s==null||s.set(a,u),u}catch(u){if(s==null||s.set(a,u),n)return null;throw u}})}findNextMatchSync(t,r,n){const s=typeof t=="string"?t:t.content,o=[];function a(i,u,c=0){return{index:i,captureIndices:u.indices.map(l=>l==null?{start:pt,end:pt,length:0}:{start:l[0]+c,end:l[1]+c,length:l[1]-l[0]})}}for(let i=0;i<this.regexps.length;i++){const u=this.regexps[i];if(u)try{u.lastIndex=r;const c=u.exec(s);if(!c)continue;if(c.index===r)return a(i,c,0);o.push([i,c,0])}catch(c){if(this.options.forgiving)continue;throw c}}if(o.length){const i=Math.min(...o.map(u=>u[1].index));for(const[u,c,l]of o)if(c.index===i)return a(u,c,l)}return null}}function Bn(e,t){return Dn(e,{global:!0,hasIndices:!0,lazyCompileLength:3e3,rules:{allowOrphanBackrefs:!0,asciiWordBoundaries:!0,captureGroup:!0,recursionLimit:5,singleline:!0},...t})}function Vn(e={}){const t=Object.assign({target:"auto",cache:new Map},e);return t.regexConstructor||(t.regexConstructor=r=>Bn(r,{target:t.target})),{createScanner(r){return new Tn(r,t)},createString(r){return{content:r}}}}const zn=Ut(()=>ft(()=>import("./C-8itutH.js"),[],import.meta.url)),Hn=Ut(async e=>{const[{createHighlighterCore:t},r]=await Promise.all([zn(),e]),n=await t({...r.core,engine:Vn()});return n.highlight=(s,o)=>Wn(s,o,n,r),n},e=>{const t=globalThis.__nuxt_shiki_cache??(globalThis.__nuxt_shiki_cache={}),r=e[1]||"default";return t[r]??(t[r]={})});function Wn(e,t,r,n){return r.codeToHtml(e,{...n.highlight,...t,lang:t.lang||n.highlight.lang,transformers:[...t.unwrap?[tr]:[],...t.transformers||[]]})}function Ut(e,t){const r=t?void 0:{};return function(...n){const s=r||t(n);if(s.value!==void 0)return s.value;if(s.promise)return s.promise;const o=e(...n);return o instanceof Promise&&(s.promise=o.then(a=>(s.value=a,delete s.promise,a))),s.promise}}async function jn(){return Hn(ft(()=>import("./yPDcNasj.js"),[],import.meta.url).then(e=>e.shikiOptions),"_internal")}const Xn={class:"tracking-wide"},Zn={key:0,class:"text-zinc-400 text-sm mb-6 flex items-center"},Qn={key:1,class:"text-2xl sm:text-3xl font-medium mb-9"},qn=["innerHTML"],Jn={__name:"PostContent",props:{postBody:{type:String,default:""},postTitle:{type:String,default:""},postUpdated:{type:[String,Number],default:""}},setup(e){const t=e,{$marked:r}=jt(),n=he(null),s=he(""),o=a=>{const i=a?[...a.classList].find(u=>u.startsWith("language-")):null;return i?i.replace("language-",""):"javascript"};return Xt(()=>t.postBody,async a=>{if(!a)return;a=r(a);const i=document.createElement("div");i.innerHTML=a;const u=i.querySelectorAll("pre");for(const c of u){const l=c.textContent.trim(),p=o(c),g=(await jn()).highlight(l,{lang:p}),d=document.createElement("div");d.innerHTML=g,c.replaceWith(d.firstChild)}s.value=i.innerHTML},{immediate:!0}),(a,i)=>(j(),re("div",Xn,[e.postUpdated?(j(),re("div",Zn,[i[0]||(i[0]=Zt("span",{class:"h-4 w-0.5 rounded-full bg-zinc-200 mr-3"},null,-1)),Qt(" 更新于："+We(new Date(e.postUpdated).toLocaleString()),1)])):Ee("",!0),e.postTitle?(j(),re("h1",Qn,We(e.postTitle),1)):Ee("",!0),s.value?(j(),re("div",{key:2,ref_key:"contentRef",ref:n,class:"text-zinc-800 text-sm sm:text-base space-y-4 sm:space-y-6",innerHTML:s.value},null,8,qn)):Ee("",!0)]))}},Kn=er(Jn,[["__scopeId","data-v-f2b6e53a"]]),Yn={key:0,class:"flex justify-center pt-20"},ss={__name:"[id]",setup(e){const t=qt(),r=he({}),n=he(!1),s=Ht(),o=async()=>{n.value=!0;try{const a=await s.get(`/articles/${t.params.id}`);r.value=a}catch(a){console.log(a)}finally{n.value=!1}};return Jt(()=>{o()}),(a,i)=>{const u=Wt,c=Kn;return j(),re("section",null,[le(n)?(j(),re("div",Yn,[Yt(u)])):(j(),Kt(c,{key:1,"post-title":le(r).title,"post-body":le(r).body_markdown,"post-updated":le(r).edited_at},null,8,["post-title","post-body","post-updated"]))])}}};export{ss as default};
